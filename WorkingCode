/*
FPS_Enroll.ino - Library example for controlling the GT-511C3 Finger Print Scanner (FPS)
Created by Josh Hawley, July 23rd 2013
Licensed for non-commercial use, must include this license message
basically, Feel free to hack away at it, but just give me credit for my work =)
TLDR; Wil Wheaton's Law
This sketch will attempt to identify a previously enrolled fingerprint.
*/
#include "FPS_GT511C3.h"
#include "SoftwareSerial.h"
// Hardware setup - FPS connected to:
// digital pin 4(arduino rx, fps tx)
// digital pin 5(arduino tx - 560ohm resistor fps tx - 1000ohm resistor - ground)
// this brings the 5v tx line down to about 3.2v so we dont fry our fps
FPS_GT511C3 fps(4, 5);
const int button1Pin = 2;
const int ledPin = 13;
SoftwareSerial display(4, 3);
const int pirPin = 6;
const int irPin = 7;
const int sensorPin = 0;


void setup()
{
Serial.begin(9600);
delay(100);
fps.Open();
fps.SetLED(true);
pinMode(button1Pin, INPUT);
pinMode(ledPin, OUTPUT);
pinMode(pirPin, INPUT);
pinMode(irPin, INPUT);
Serial.println("Press Finger");
delay(3000);
}
void loop()
{
bool finger = false;
bool button= false;
bool motion =false;
bool ir=false;
// Identify fingerprint test
if (fps.IsPressFinger())
{
//Serial.print("Press Finger");
fps.CaptureFinger(false);
int id = fps.Identify1_N();
if (id <5)
{
Serial.println("Access Granted:");
switch(id){
case 0:
Serial.println(" Hi Kalonji! ");
finger=true;
break;
case 1:
Serial.println(" Hey Eric! ");
finger=true;
break;
case 2:
Serial.println("Who dat?");
finger=true;
break;
case 3:
Serial.println(" Yo Carley! ");
finger=true;
break;
}
}
else
{
Serial.println("Finger not found");
Serial.println("Press Finger");
}
}
delay(1000);
while(finger==true){
//Push Button Start
int button1State;
button1State = digitalRead(button1Pin);
if (((button1State == LOW)))
{
Serial.println("Pressure Sensor!");
digitalWrite(ledPin , HIGH);
delay(200);
}
else {
Serial.println("All Quiet...");
digitalWrite(ledPin, LOW);
delay(50);
//Push Button End
}
//int pirVal = digitalRead(pirPin);
//if(pirVal == LOW){ //was motion detected
//Serial.println("Motion Detected!");
//digitalWrite(ledPin , HIGH);
//delay(500);
//} else {
//Serial.println("All Quiet Motion...");
//digitalWrite(ledPin, LOW);
//delay(50);
//}
//int val = digitalRead(irPin);
//if(val){
//Serial.println("All Quiet Doorway...");
//digitalWrite(ledPin, LOW); }
//else {
//Serial.println("Intruder: Doorway!");
//digitalWrite(ledPin, HIGH);
//delay(100);
//}


int val =0;
val= analogRead(sensorPin);
if(val>500){
  digitalWrite(ledPin, HIGH);
  Serial.println("Case Housing Open!");
  delay(200);
}else{
  digitalWrite(ledPin, LOW);
  Serial.println("All Quiet...");
  delay(50);
} 
}
}//end of while
